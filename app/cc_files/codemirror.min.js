// CodeMirror version 2.35
//
// All functions that need access to the editor's state live inside
// the CodeMirror function. Below that, at the bottom of the file,
// some utilities are defined.
// CodeMirror is the only global var we claim
window.CodeMirror=function(){function a(d,e){function ck(a){if(f.onDragEvent&&f.onDragEvent(co,X(a)))return;$(a)}function cn(a){return a>=0&&a<bH.size}function cp(a){return R(bH,a)}function cq(a,b){bY=!0;var c=b-a.height;for(var d=a;d;d=d.parent)d.height+=c}function cr(a,b){return a.styles||a.highlight(bG,a.stateAfter=ei(S(a)),f.tabSize),a.getContent(f.tabSize,b,f.lineWrapping)}function cs(a){var b={line:0,ch:0};cK(b,{line:bH.size-1,ch:cp(bH.size-1).text.length},bz(a),b,b),bT=!0}function ct(a){var b=[];return bH.iter(0,bH.size,function(a){b.push(a.text)}),b.join(a||"\n")}function cu(a){F.scrollTop!=bO&&(bO=bv.scrollTop=F.scrollTop,dg([]))}function cv(a){f.fixedGutter&&bh.style.left!=bv.scrollLeft+"px"&&(bh.style.left=bv.scrollLeft+"px"),bv.scrollTop!=bO&&(bO=bv.scrollTop,F.scrollTop!=bO&&(F.scrollTop=bO),dg([])),f.onScroll&&f.onScroll(co)}function cw(a){function h(b){t&&(bv.draggable=!1),bP=!1,k(),l(),Math.abs(a.clientX-b.clientX)+Math.abs(a.clientY-b.clientY)<10&&(Y(b),dq(c.line,c.ch,!0),da())}function q(a){if(e=="single")dm(c,a);else if(e=="double"){var b=dx(a);bq(a,m)?dm(b.from,n):dm(m,b.to)}else e=="triple"&&(bq(a,m)?dm(n,ds({line:a.line,ch:0})):dm(m,ds({line:a.line+1,ch:0})))}function r(a){var b=eb(a,!0);if(b&&!bp(b,i)){bJ||cI(),i=b,q(b),bT=!1;var c=df();if(b.line>=c.to||b.line<c.from)j=setTimeout(eo(function(){r(a)}),150)}}function s(a){clearTimeout(j);var b=eb(a);b&&q(b),Y(a),da(),bT=!0,u(),k()}dl(bb(a,"shiftKey"));for(var b=_(a);b!=bC;b=b.parentNode)if(b.parentNode==bl&&b!=bi)return;for(var b=_(a);b!=bC;b=b.parentNode)if(b.parentNode==bg)return f.onGutterClick&&f.onGutterClick(co,bx(bg.childNodes,b)+b_,a),Y(a);var c=eb(a);switch(ba(a)){case 3:o&&ed(a);return;case 2:c&&dq(c.line,c.ch,!0),setTimeout(da,20),Y(a);return}if(!c){_(a)==bv&&Y(a);return}bJ||cI();var d=+(new Date),e="single";if(bN&&bN.time>d-400&&bp(bN.pos,c))e="triple",Y(a),setTimeout(da,20),dy(c.line);else if(bM&&bM.time>d-400&&bp(bM.pos,c)){e="double",bN={time:d,pos:c},Y(a);var g=dx(c);dm(g.from,g.to)}else bM={time:d,pos:c};var i=c,j;if(f.dragDrop&&bf&&!f.readOnly&&!bp(bK.from,bK.to)&&!bq(c,bK.from)&&!bq(bK.to,c)&&e=="single"){t&&(bv.draggable=!0);var k=bc(document,"mouseup",eo(h),!0),l=bc(bv,"drop",eo(h),!0);bP=!0,bv.dragDrop&&bv.dragDrop();return}Y(a),e=="single"&&dq(c.line,c.ch,!0);var m=bK.from,n=bK.to,u=bc(document,"mousemove",eo(function(a){clearTimeout(j),Y(a),!p&&!ba(a)?s(a):r(a)}),!0),k=bc(document,"mouseup",eo(s),!0)}function cx(a){for(var b=_(a);b!=bC;b=b.parentNode)if(b.parentNode==bg)return Y(a);Y(a)}function cy(a){if(f.onDragEvent&&f.onDragEvent(co,X(a)))return;Y(a);var b=eb(a,!0),c=a.dataTransfer.files;if(!b||f.readOnly)return;if(c&&c.length&&window.FileReader&&window.File){var d=c.length,e=Array(d),g=0,h=function(a,c){var f=new FileReader;f.onload=function(){e[c]=f.result,++g==d&&(b=ds(b),eo(function(){var a=cS(e.join(""),b,b);dm(b,a)})())},f.readAsText(a)};for(var i=0;i<d;++i)h(c[i],i)}else{if(bP&&!bq(b,bK.from)&&!bq(bK.to,b))return;try{var e=a.dataTransfer.getData("Text");e&&ep(function(){var a=bK.from,c=bK.to;dm(b,b),bP&&cS("",a,c),cT(e),da()})}catch(a){}}}function cz(a){var b=cW();a.dataTransfer.setData("Text",b),a.dataTransfer.setDragImage&&a.dataTransfer.setDragImage(bs("img"),0,0)}function cA(a,b){if(typeof a=="string"){a=j[a];if(!a)return!1}var c=bL;try{f.readOnly&&(bR=!0),b&&(bL=null),a(co)}catch(d){if(d!=be)throw d;return!1}finally{bL=c,bR=!1}return!0}function cC(a){function j(){i=!0}var b=l(f.keyMap),d=b.auto;clearTimeout(cB),d&&!n(a)&&(cB=setTimeout(function(){l(f.keyMap)==b&&(f.keyMap=d.call?d.call(null,co):d)},50));var e=bB[bb(a,"keyCode")],g=!1,h=v&&c;if(e==null||a.altGraphKey)return!1;bb(a,"altKey")&&(e="Alt-"+e),bb(a,h?"metaKey":"ctrlKey")&&(e="Ctrl-"+e),bb(a,h?"ctrlKey":"metaKey")&&(e="Cmd-"+e);var i=!1;return bb(a,"shiftKey")?g=m("Shift-"+e,f.extraKeys,f.keyMap,function(a){return cA(a,!0)},j)||m(e,f.extraKeys,f.keyMap,function(a){if(typeof a=="string"&&/^go[A-Z]/.test(a))return cA(a)},j):g=m(e,f.extraKeys,f.keyMap,cA,j),i&&(g=!1),g&&(Y(a),ee(),p&&(a.oldKeyCode=a.keyCode,a.keyCode=0)),g}function cD(a,b){var c=m("'"+b+"'",f.extraKeys,f.keyMap,function(a){return cA(a,!0)});return c&&(Y(a),ee()),c}function cF(a){bJ||cI(),p&&a.keyCode==27&&(a.returnValue=!1),cg&&c$()&&(cg=!1);if(f.onKeyEvent&&f.onKeyEvent(co,X(a)))return;var b=bb(a,"keyCode");dl(b==16||bb(a,"shiftKey"));var d=cC(a);v&&(cE=d?b:null,!d&&b==88&&bb(a,c?"metaKey":"ctrlKey")&&cT(""))}function cG(a){cg&&c$();if(f.onKeyEvent&&f.onKeyEvent(co,X(a)))return;var b=bb(a,"keyCode"),c=bb(a,"charCode");if(v&&b==cE){cE=null,Y(a);return}if((v&&(!a.which||a.which<10)||x)&&cC(a))return;var d=String.fromCharCode(c==null?b:c);f.electricChars&&bG.electricChars&&f.smartIndent&&!f.readOnly&&bG.electricChars.indexOf(d)>-1&&setTimeout(eo(function(){dA(bK.to.line,"smart")}),75);if(cD(a,d))return;cY()}function cH(a){if(f.onKeyEvent&&f.onKeyEvent(co,X(a)))return;bb(a,"keyCode")==16&&(bL=null)}function cI(){if(f.readOnly=="nocursor")return;bJ||(f.onFocus&&f.onFocus(co),bJ=!0,bv.className.search(/\bCodeMirror-focused\b/)==-1&&(bv.className+=" CodeMirror-focused")),cX(),ee()}function cJ(){bJ&&(f.onBlur&&f.onBlur(co),bJ=!1,cc&&eo(function(){cc&&(cc(),cc=null)})(),bv.className=bv.className.replace(" CodeMirror-focused","")),clearInterval(bF),setTimeout(function(){bJ||(bL=null)},150)}function cK(a,b,c,d,e){if(bR)return;var g=[];bH.iter(a.line,b.line+1,function(a){g.push(K(a.text,a.markedSpans))});if(ci){ci.addChange(a.line,c.length,g);while(ci.done.length>f.undoDepth)ci.done.shift()}var h=H(J(g[0]),J(bn(g)),a.ch,b.ch,c);cO(a,b,h,d,e)}function cL(a,b){if(!a.length)return;var c=a.pop(),d=[];for(var e=c.length-1;e>=0;e-=1){var f=c[e],g=[],h=f.start+f.added;bH.iter(f.start,h,function(a){g.push(K(a.text,a.markedSpans))}),d.push({start:f.start,added:f.old.length,old:g});var i={line:f.start+f.old.length-1,ch:bw(I(bn(g)),I(bn(f.old)))};cO({line:f.start,ch:0},{line:h-1,ch:cp(h-1).text.length},f.old,i,i)}bT=!0,b.push(d)}function cM(){cL(ci.done,ci.undone)}function cN(){cL(ci.undone,ci.done)}function cO(a,b,c,d,e){function u(a){return a<=Math.min(b.line,b.line+r)?a:a+r}if(bR)return;var g=!1,h=cd.text.length;f.lineWrapping||bH.iter(a.line,b.line+1,function(a){if(!a.hidden&&a.text.length==h)return g=!0,!0});if(a.line!=b.line||c.length>1)bY=!0;var i=b.line-a.line,j=cp(a.line),k=cp(b.line),l=bn(c);if(a.ch==0&&b.ch==0&&I(l)==""){var m=[],n=null;for(var o=0,p=c.length-1;o<p;++o)m.push(new O(I(c[o]),J(c[o])));k.update(k.text,J(l)),i&&bH.remove(a.line,i,bZ),m.length&&bH.insert(a.line,m)}else if(j==k)if(c.length==1)j.update(j.text.slice(0,a.ch)+I(c[0])+j.text.slice(b.ch),J(c[0]));else{for(var m=[],o=1,p=c.length-1;o<p;++o)m.push(new O(I(c[o]),J(c[o])));m.push(new O(I(l)+j.text.slice(b.ch),J(l))),j.update(j.text.slice(0,a.ch)+I(c[0]),J(c[0])),bH.insert(a.line+1,m)}else if(c.length==1)j.update(j.text.slice(0,a.ch)+I(c[0])+k.text.slice(b.ch),J(c[0])),bH.remove(a.line+1,i,bZ);else{var m=[];j.update(j.text.slice(0,a.ch)+I(c[0]),J(c[0])),k.update(I(l)+k.text.slice(b.ch),J(l));for(var o=1,p=c.length-1;o<p;++o)m.push(new O(I(c[o]),J(c[o])));i>1&&bH.remove(a.line+1,i-1,bZ),bH.insert(a.line+1,m)}if(f.lineWrapping){var q=Math.max(5,bv.clientWidth/d$()-3);bH.iter(a.line,a.line+c.length,function(a){if(a.hidden)return;var b=Math.ceil(a.text.length/q)||1;b!=a.height&&cq(a,b)})}else bH.iter(a.line,a.line+c.length,function(a){var b=a.text;!a.hidden&&b.length>h&&(cd=a,h=b.length,cf=!0,g=!1)}),g&&(ce=!0);bI=Math.min(bI,a.line),ek(400);var r=c.length-i-1;bV.push({from:a.line,to:b.line+1,diff:r});if(f.onChange){for(var o=0;o<c.length;++o)typeof c[o]!="string"&&(c[o]=c[o].text);var s={from:a,to:b,text:c};if(bW){for(var t=bW;t.next;t=t.next);t.next=s}else bW=s}dn(ds(d),ds(e),u(bK.from.line),u(bK.to.line))}function cP(){var a=bH.height*dX()+2*d_();return a*.99>bv.offsetHeight?a:!1}function cQ(a){var b=cP();F.style.display=b?"block":"none",b?(C.style.height=bl.style.minHeight=b+"px",F.style.height=bv.clientHeight+"px",a!=null&&(F.scrollTop=bv.scrollTop=a,t&&setTimeout(function(){if(F.scrollTop!=a)return;F.scrollTop=a+(a?-1:1),F.scrollTop=a},0))):bl.style.minHeight="",bi.style.top=b$*dX()+"px"}function cR(){cd=cp(0),cf=!0;var a=cd.text.length;bH.iter(1,bH.size,function(b){var c=b.text;!b.hidden&&c.length>a&&(a=c.length,cd=b)}),ce=!1}function cS(a,b,c){function d(d){if(bq(d,b))return d;if(!bq(c,d))return e;var f=d.line+a.length-(c.line-b.line)-1,g=d.ch;return d.line==c.line&&(g+=bn(a).length-(c.ch-(c.line==b.line?b.ch:0))),{line:f,ch:g}}b=ds(b),c?c=ds(c):c=b,a=bz(a);var e;return cU(a,b,c,function(a){return e=a,{from:d(bK.from),to:d(bK.to)}}),e}function cT(a,b){cU(bz(a),bK.from,bK.to,function(a){return b=="end"?{from:a,to:a}:b=="start"?{from:bK.from,to:bK.from}:{from:bK.from,to:a}})}function cU(a,b,c,d){var e=a.length==1?a[0].length+b.ch:bn(a).length,f=d({line:b.line+a.length-1,ch:e});cK(b,c,a,f.from,f.to)}function cV(a,b,c){var d=a.line,e=b.line;if(d==e)return cp(d).text.slice(a.ch,b.ch);var f=[cp(d).text.slice(a.ch)];return bH.iter(d+1,e,function(a){f.push(a.text)}),f.push(cp(e).text.slice(0,b.ch)),f.join(c||"\n")}function cW(a){return cV(bK.from,bK.to,a)}function cX(){if(cg)return;bD.set(f.pollInterval,function(){c$(),bJ&&cX()})}function cY(){function b(){var c=c$();!c&&!a?(a=!0,bD.set(60,b)):(cg=!1,cX())}var a=!1;cg=!0,bD.set(20,b)}function c$(){if(!bJ||bA(w)||f.readOnly)return!1;var a=w.value;if(a==cZ)return!1;en||el(),bL=null;var b=0,c=Math.min(cZ.length,a.length);while(b<c&&cZ[b]==a[b])++b;return b<cZ.length?bK.from={line:bK.from.line,ch:bK.from.ch-(cZ.length-b)}:bQ&&bp(bK.from,bK.to)&&!bS&&(bK.to={line:bK.to.line,ch:Math.min(cp(bK.to.line).text.length,bK.to.ch+(a.length-b))}),cT(a.slice(b),"end"),a.length>1e3?w.value=cZ="":cZ=a,en||em(),bS=!1,!0}function c_(a){bp(bK.from,bK.to)?a&&(cZ=w.value=""):(cZ="",w.value=cW(),bJ&&bo(w))}function da(){f.readOnly!="nocursor"&&w.focus()}function db(){var a=dc();dd(a.x,a.y,a.x,a.yBot);if(!bJ)return;var b=bl.getBoundingClientRect(),c=null;a.y+b.top<0?c=!0:a.y+b.top+dX()>(window.innerHeight||document.documentElement.clientHeight)&&(c=!1);if(c!=null){var d=M.style.display=="none";d&&(M.style.display="",M.style.left=a.x+"px",M.style.top=a.y-b$+"px"),M.scrollIntoView(c),d&&(M.style.display="none")}}function dc(){var a=dR(bK.inverted?bK.from:bK.to),b=f.lineWrapping?Math.min(a.x,Z.offsetWidth):a.x;return{x:b,y:a.y,yBot:a.yBot}}function dd(a,b,c,d){var e=de(a,b,c,d);e.scrollLeft!=null&&(bv.scrollLeft=e.scrollLeft),e.scrollTop!=null&&(F.scrollTop=bv.scrollTop=e.scrollTop)}function de(a,b,c,d){var e=ea(),g=d_();b+=g,d+=g,a+=e,c+=e;var h=bv.clientHeight,i=F.scrollTop,j={},k=cP()||Infinity,l=b<g+10,m=d+g>k-10;b<i?j.scrollTop=l?0:Math.max(0,b):d>i+h&&(j.scrollTop=(m?k:d)-h);var n=bv.clientWidth,o=bv.scrollLeft,p=f.fixedGutter?bh.clientWidth:0,q=a<p+e+10;return a<o+p||q?(q&&(a=0),j.scrollLeft=Math.max(0,a-10-p)):c>n+o-3&&(j.scrollLeft=c+10-n),j}function df(a){var b=dX(),c=(a!=null?a:F.scrollTop)-d_(),d=Math.max(0,Math.floor(c/b)),e=Math.ceil((c+bv.clientHeight)/b);return{from:T(bH,d),to:T(bH,e)}}function dg(a,b,c){function o(){var a=G.firstChild,b=!1;return bH.iter(b_,ca,function(c){if(!a)return;if(!c.hidden){var d=Math.round(a.offsetHeight/l)||1;c.height!=d&&(cq(c,d),bY=b=!0)}a=a.nextSibling}),b}if(!bv.clientWidth){b_=ca=b$=0;return}var d=df(c);if(a!==!0&&a.length==0&&d.from>b_&&d.to<ca){cQ(c);return}var e=Math.max(d.from-100,0),g=Math.min(bH.size,d.to+100);b_<e&&e-b_<20&&(e=b_),ca>g&&ca-g<20&&(g=Math.min(bH.size,ca));var h=a===!0?[]:dh([{from:b_,to:ca,domStart:0}],a),i=0;for(var j=0;j<h.length;++j){var k=h[j];k.from<e&&(k.domStart+=e-k.from,k.from=e),k.to>g&&(k.to=g),k.from>=k.to?h.splice(j--,1):i+=k.to-k.from}if(i==g-e&&e==b_&&g==ca){cQ(c);return}h.sort(function(a,b){return a.domStart-b.domStart});var l=dX(),m=bh.style.display;G.style.display="none",di(e,g,h),G.style.display=bh.style.display="";var n=e!=b_||g!=ca||cb!=bv.clientHeight+l;n&&(cb=bv.clientHeight+l),(e!=b_||g!=ca&&f.onViewportChange)&&setTimeout(function(){f.onViewportChange&&f.onViewportChange(co,e,g)}),b_=e,ca=g,b$=U(bH,e),ek(100);if(G.childNodes.length!=ca-b_)throw new Error("BAD PATCH! "+JSON.stringify(h)+" size="+(ca-b_)+" nodes="+G.childNodes.length);return f.lineWrapping&&o(),bh.style.display=m,(n||bY)&&dj()&&f.lineWrapping&&o()&&dj(),cQ(c),dk(),!b&&f.onUpdate&&f.onUpdate(co),!0}function dh(a,b){for(var c=0,d=b.length||0;c<d;++c){var e=b[c],f=[],g=e.diff||0;for(var h=0,i=a.length;h<i;++h){var j=a[h];e.to<=j.from&&e.diff?f.push({from:j.from+g,to:j.to+g,domStart:j.domStart}):e.to<=j.from||e.from>=j.to?f.push(j):(e.from>j.from&&f.push({from:j.from,to:e.from,domStart:j.domStart}),e.to<j.to&&f.push({from:e.to+g,to:j.to+g,domStart:j.domStart+(e.to-j.from)}))}a=f}return a}function di(a,b,c){function d(a){var b=a.nextSibling;return a.parentNode.removeChild(a),b}if(!c.length)bt(G);else{var e=0,f=G.firstChild,g;for(var h=0;h<c.length;++h){var i=c[h];while(i.domStart>e)f=d(f),e++;for(var j=0,k=i.to-i.from;j<k;++j)f=f.nextSibling,e++}while(f)f=d(f)}var l=c.shift(),f=G.firstChild,j=a;bH.iter(a,b,function(a){l&&l.to==j&&(l=c.shift());if(!l||l.from>j){if(a.hidden)var b=bs("pre");else{var b=cr(a);a.className&&(b.className=a.className);if(a.bgClassName){var d=bs("pre"," ",a.bgClassName,"position: absolute; left: 0; right: 0; top: 0; bottom: 0; z-index: -2");b=bs("div",[d,b],null,"position: relative")}}G.insertBefore(b,f)}else f=f.nextSibling;++j})}function dj(){if(!f.gutter&&!f.lineNumbers)return;var a=bi.offsetHeight,b=bv.clientHeight;bh.style.height=(a-b<2?b:a)+"px";var c=document.createDocumentFragment(),d=b_,e;bH.iter(b_,Math.max(ca,b_+1),function(a){if(a.hidden)c.appendChild(bs("pre"));else{var b=a.gutterMarker,g=f.lineNumbers?f.lineNumberFormatter(d+f.firstLineNumber):null;b&&b.text?g=b.text.replace("%N%",g!=null?g:""):g==null&&(g=" ");var h=c.appendChild(bs("pre",null,b&&b.style));h.innerHTML=g;for(var i=1;i<a.height;++i)h.appendChild(bs("br")),h.appendChild(document.createTextNode(" "));b||(e=d)}++d}),bh.style.display="none",bu(bg,c);if(e!=null&&f.lineNumbers){var g=bg.childNodes[e-b_],h=String(bH.size).length,i=bk(g.firstChild),j="";while(i.length+j.length<h)j+=" ";j&&g.insertBefore(document.createTextNode(j),g.firstChild)}bh.style.display="";var k=Math.abs((parseInt(Z.style.marginLeft)||0)-bh.offsetWidth)>2;return Z.style.marginLeft=bh.offsetWidth+"px",bY=!1,k}function dk(){var a=bp(bK.from,bK.to),b=dR(bK.from,!0),c=a?b:dR(bK.to,!0),d=bK.inverted?b:c,e=dX(),g=bj(bC),h=bj(G);B.style.top=Math.max(0,Math.min(bv.offsetHeight,d.y+h.top-g.top))+"px",B.style.left=Math.max(0,Math.min(bv.offsetWidth,d.x+h.left-g.left))+"px";if(a)M.style.top=d.y+"px",M.style.left=(f.lineWrapping?Math.min(d.x,Z.offsetWidth):d.x)+"px",M.style.display="",L.style.display="none";else{var i=b.y==c.y,j=document.createDocumentFragment(),k=Z.clientWidth||Z.offsetWidth,l=Z.clientHeight||Z.offsetHeight,m=function(a,b,c,d){var e=s?"width: "+(c?k-c-a:k)+"px":"right: "+c+"px";j.appendChild(bs("div",null,"CodeMirror-selected","position: absolute; left: "+a+"px; top: "+b+"px; "+e+"; height: "+d+"px"))};if(bK.from.ch&&b.y>=0){var n=i?k-c.x:0;m(b.x,b.y,n,e)}var o=Math.max(0,b.y+(bK.from.ch?e:0)),p=Math.min(c.y,l)-o;p>.2*e&&m(0,o,0,p),(!i||!bK.from.ch)&&c.y<l-.5*e&&m(0,c.y,k-c.x,e),bu(L,j),M.style.display="none",L.style.display=""}}function dl(a){a?bL=bL||(bK.inverted?bK.to:bK.from):bL=null}function dm(a,b){var c=bL&&ds(bL);c&&(bq(c,a)?a=c:bq(b,c)&&(b=c)),dn(a,b),bU=!0}function dn(a,b,c,d){ch=null,c==null&&(c=bK.from.line,d=bK.to.line);if(bp(bK.from,a)&&bp(bK.to,b))return;if(bq(b,a)){var e=b;b=a,a=e}if(a.line!=c){var g=dp(a,c,bK.from.ch);g?a=g:dO(a.line,!1)}b.line!=d&&(b=dp(b,d,bK.to.ch)),bp(a,b)?bK.inverted=!1:bp(a,bK.to)?bK.inverted=!1:bp(b,bK.from)&&(bK.inverted=!0);if(f.autoClearEmptyLines&&bp(bK.from,bK.to)){var h=bK.inverted?a:b;if(h.line!=bK.from.line&&bK.from.line<bH.size){var i=cp(bK.from.line);/^\s+$/.test(i.text)&&setTimeout(eo(function(){if(i.parent&&/^\s+$/.test(i.text)){var a=S(i);cS("",{line:a,ch:0},{line:a,ch:i.text.length})}},10))}}bK.from=a,bK.to=b,bX=!0}function dp(a,b,c){function d(b){var d=a.line+b,e=b==1?bH.size:-1;while(d!=e){var g=cp(d);if(!g.hidden){var h=a.ch;if(f||h>c||h>g.text.length)h=g.text.length;return{line:d,ch:h}}d+=b}}var e=cp(a.line),f=a.ch==e.text.length&&a.ch!=c;return e.hidden?a.line>=b?d(1)||d(-1):d(-1)||d(1):a}function dq(a,b,c){var d=ds({line:a,ch:b||0});(c?dm:dn)(d,d)}function dr(a){return Math.max(0,Math.min(a,bH.size-1))}function ds(a){if(a.line<0)return{line:0,ch:0};if(a.line>=bH.size)return{line:bH.size-1,ch:cp(bH.size-1).text.length};var b=a.ch,c=cp(a.line).text.length;return b==null||b>c?{line:a.line,ch:c}:b<0?{line:a.line,ch:0}:a}function dt(a,b){function g(){for(var b=d+a,c=a<0?-1:bH.size;b!=c;b+=a){var e=cp(b);if(!e.hidden)return d=b,f=e,!0}}function h(b){if(e==(a<0?0:f.text.length))if(!b&&g())e=a<0?f.text.length:0;else return!1;else e+=a;return!0}var c=bK.inverted?bK.from:bK.to,d=c.line,e=c.ch,f=cp(d);if(b=="char")h();else if(b=="column")h(!0);else if(b=="word"){var i=!1;for(;;){if(a<0&&!h())break;if(by(f.text.charAt(e)))i=!0;else if(i){a<0&&(a=1,h());break}if(a>0&&!h())break}}return{line:d,ch:e}}function du(a,b){var c=a<0?bK.from:bK.to;if(bL||bp(bK.from,bK.to))c=dt(a,b);dq(c.line,c.ch,!0)}function dv(a,b){bp(bK.from,bK.to)?a<0?cS("",dt(a,b),bK.to):cS("",bK.from,dt(a,b)):cS("",bK.from,bK.to),bU=!0}function dw(a,b){var c=0,d=dR(bK.inverted?bK.from:bK.to,!0);ch!=null&&(d.x=ch);if(b=="page")var e=Math.min(bv.clientHeight,window.innerHeight||document.documentElement.clientHeight),f=dS(d.x,d.y+e*a);else if(b=="line")var g=dX(),f=dS(d.x,d.y+.5*g+a*g);b=="page"&&(F.scrollTop+=dR(f,!0).y-d.y),dq(f.line,f.ch,!0),ch=d.x}function dx(a){var b=cp(a.line).text,c=a.ch,d=a.ch;if(b){a.after===!1||d==b.length?--c:++d;var e=b.charAt(c),f=by(e)?by:/\s/.test(e)?function(a){return/\s/.test(a)}:function(a){return!/\s/.test(a)&&by(a)};while(c>0&&f(b.charAt(c-1)))--c;while(d<b.length&&f(b.charAt(d)))++d}return{from:{line:a.line,ch:c},to:{line:a.line,ch:d}}}function dy(a){dm({line:a,ch:0},ds({line:a+1,ch:0}))}function dz(a){if(bp(bK.from,bK.to))return dA(bK.from.line,a);var b=bK.to.line-(bK.to.ch?0:1);for(var c=bK.from.line;c<=b;++c)dA(c,a)}function dA(a,b){b||(b="add");if(b=="smart")if(!bG.indent)b="prev";else var c=ei(a);var d=cp(a),e=d.indentation(f.tabSize),g=d.text.match(/^\s*/)[0],h;b=="smart"&&(h=bG.indent(c,d.text.slice(g.length),d.text),h==be&&(b="prev")),b=="prev"?a?h=cp(a-1).indentation(f.tabSize):h=0:b=="add"?h=e+f.indentUnit:b=="subtract"&&(h=e-f.indentUnit),h=Math.max(0,h);var i=h-e,j="",k=0;if(f.indentWithTabs)for(var l=Math.floor(h/f.tabSize);l;--l)k+=f.tabSize,j+="\t";k<h&&(j+=bm(h-k)),j!=g&&cS(j,{line:a,ch:0},{line:a,ch:g.length}),d.stateAfter=null}function dB(){bG=a.getMode(f,f.mode),bH.iter(0,bH.size,function(a){a.stateAfter=null}),bI=0,ek(100)}function dC(){var a=f.gutter||f.lineNumbers;bh.style.display=a?"":"none",a?bY=!0:G.parentNode.style.marginLeft=0}function dD(a,b){if(f.lineWrapping){bC.className+=" CodeMirror-wrap";var c=bv.clientWidth/d$()-3;bH.iter(0,bH.size,function(a){if(a.hidden)return;var b=Math.ceil(a.text.length/c)||1;b!=1&&cq(a,b)}),Z.style.minWidth=N.style.left=""}else bC.className=bC.className.replace(" CodeMirror-wrap",""),cR(),bH.iter(0,bH.size,function(a){a.height!=1&&!a.hidden&&cq(a,1)});bV.push({from:0,to:bH.size})}function dE(){bv.className=bv.className.replace(/\s*cm-s-\S+/g,"")+f.theme.replace(/(^|\s)\s*/g," cm-s-")}function dF(){var a=k[f.keyMap].style;bC.className=bC.className.replace(/\s*cm-keymap-\S+/g,"")+(a?" cm-keymap-"+a:"")}function dG(a,b){this.lines=[],this.type=a,b&&(this.style=b)}function dH(a,b,c,d){a=ds(a),b=ds(b);var e=new dG("range",c);if(d)for(var f in d)d.hasOwnProperty(f)&&(e[f]=d[f]);var g=a.line;return bH.iter(g,b.line+1,function(c){var d={from:g==a.line?a.ch:null,to:g==b.line?b.ch:null,marker:e};c.markedSpans=(c.markedSpans||[]).concat([d]),e.lines.push(c),++g}),bV.push({from:a.line,to:b.line+1}),e}function dI(a){a=ds(a);var b=new dG("bookmark"),c=cp(a.line);ci.addChange(a.line,1,[K(c.text,c.markedSpans)],!0);var d={from:a.ch,to:a.ch,marker:b};return c.markedSpans=(c.markedSpans||[]).concat([d]),b.lines.push(c),b}function dJ(a){a=ds(a);var b=[],c=cp(a.line).markedSpans;if(c)for(var d=0;d<c.length;++d){var e=c[d];(e.from==null||e.from<=a.ch)&&(e.to==null||e.to>=a.ch)&&b.push(e.marker)}return b}function dK(a,b,c){return typeof a=="number"&&(a=cp(dr(a))),a.gutterMarker={text:b,style:c},bY=!0,a}function dL(a){typeof a=="number"&&(a=cp(dr(a))),a.gutterMarker=null,bY=!0}function dM(a,b){var c=a,d=a;typeof a=="number"?d=cp(dr(a)):c=S(a);if(c==null)return null;if(b(d,c))bV.push({from:c,to:c+1});else return null;return d}function dN(a,b,c){return dM(a,function(a){if(a.className!=b||a.bgClassName!=c)return a.className=b,a.bgClassName=c,!0})}function dO(a,b){return dM(a,function(a,c){if(a.hidden!=b){a.hidden=b,f.lineWrapping||(b&&a.text.length==cd.text.length?ce=!0:!b&&a.text.length>cd.text.length&&(cd=a,ce=!1)),cq(a,b?0:1);var d=bK.from.line,e=bK.to.line;if(b&&(d==c||e==c)){var g=d==c?dp({line:d,ch:0},d,0):bK.from,h=e==c?dp({line:e,ch:0},e,0):bK.to;if(!h)return;dn(g,h)}return bY=!0}})}function dP(a){if(typeof a=="number"){if(!cn(a))return null;var b=a;a=cp(a);if(!a)return null}else{var b=S(a);if(b==null)return null}var c=a.gutterMarker;return{line:b,handle:a,text:a.text,markerText:c&&c.text,markerClass:c&&c.style,lineClass:a.className,bgClass:a.bgClassName}}function dQ(a,b){if(b==0)return{top:0,left:0};var c=cr(a,b);bu(W,c);var d=c.anchor,e=d.offsetTop,f=d.offsetLeft;if(p&&e==0&&f==0){var g=bs("span","x");d.parentNode.insertBefore(g,d.nextSibling),e=g.offsetTop}return{top:e,left:f}}function dR(a,b){var c,d=dX(),e=d*(U(bH,a.line)-(b?b$:0));if(a.ch==0)c=0;else{var g=dQ(cp(a.line),a.ch);c=g.left,f.lineWrapping&&(e+=Math.max(0,g.top))}return{x:c,y:e,yBot:e+d}}function dS(a,b){function m(a){var b=dQ(h,a);if(j){var d=Math.round(b.top/c);return l=d!=k,Math.max(0,b.left+(d-k)*bv.clientWidth)}return b.left}var c=dX(),d=d$(),e=b$+Math.floor(b/c);if(e<0)return{line:0,ch:0};var g=T(bH,e);if(g>=bH.size)return{line:bH.size-1,ch:cp(bH.size-1).text.length};var h=cp(g),i=h.text,j=f.lineWrapping,k=j?e-U(bH,g):0;if(a<=0&&k==0)return{line:g,ch:0};var l=!1,n=0,o=0,p=i.length,q,r=Math.min(p,Math.ceil((a+k*bv.clientWidth*.9)/d));for(;;){var s=m(r);if(s<=a&&r<p)r=Math.min(p,Math.ceil(r*1.2));else{q=s,p=r;break}}if(a>q)return{line:g,ch:p};r=Math.floor(p*.8),s=m(r),s<a&&(n=r,o=s);for(;;){if(p-n<=1){var t=a-o<q-a;return{line:g,ch:t?n:p,after:t}}var u=Math.ceil((n+p)/2),v=m(u);v>a?(p=u,q=v,l&&(q+=1e3)):(n=u,o=v)}}function dT(a){var b=dR(a,!0),c=bj(Z);return{x:c.left+b.x,y:c.top+b.y,yBot:c.top+b.yBot}}function dX(){if(dW==null){dW=bs("pre");for(var a=0;a<49;++a)dW.appendChild(document.createTextNode("x")),dW.appendChild(bs("br"));dW.appendChild(document.createTextNode("x"))}var b=G.clientHeight;return b==dV?dU:(dV=b,bu(W,dW.cloneNode(!0)),dU=W.firstChild.offsetHeight/50||1,bt(W),dU)}function d$(){if(bv.clientWidth==dZ)return dY;dZ=bv.clientWidth;var a=bs("span","x"),b=bs("pre",[a]);return bu(W,b),dY=a.offsetWidth||10}function d_(){return Z.offsetTop}function ea(){return Z.offsetLeft}function eb(a,b){var c=bj(bv,!0),d,e;try{d=a.clientX,e=a.clientY}catch(a){return null}if(!b&&(d-c.left>bv.clientWidth||e-c.top>bv.clientHeight))return null;var f=bj(Z,!0);return dS(d-f.left,e-f.top)}function ed(a){function e(){B.style.position="relative",w.style.cssText=d,r&&(F.scrollTop=c),cX();if(w.selectionStart!=null){clearTimeout(ec);var a=w.value=" "+(bp(bK.from,bK.to)?"":w.value),b=0;cZ=" ",w.selectionStart=1,w.selectionEnd=a.length,ec=setTimeout(function e(){cZ==" "&&w.selectionStart==0?eo(j.selectAll)(co):b++<10?ec=setTimeout(e,500):c_()},200)}}var b=eb(a),c=F.scrollTop;if(!b||v)return;(bp(bK.from,bK.to)||bq(b,bK.from)||!bq(b,bK.to))&&eo(dq)(b.line,b.ch);var d=w.style.cssText;B.style.position="absolute",w.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(a.clientY-5)+"px; left: "+(a.clientX-5)+"px; z-index: 1000; background: white; "+"border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",da(),c_(!0),bp(bK.from,bK.to)&&(w.value=cZ=" ");if(o){$(a);var f=bc(window,"mouseup",function(){f(),setTimeout(e,20)},!0)}else setTimeout(e,50)}function ee(){clearInterval(bF);var a=!0;M.style.visibility="",bF=setInterval(function(){M.style.visibility=(a=!a)?"":"hidden"},f.cursorBlinkRate)}function eg(a){function p(a,b,c){if(!a.text)return;var d=a.styles,e=g?0:a.text.length-1,f;for(var i=g?0:d.length-2,j=g?d.length:-2;i!=j;i+=2*h){var k=d[i];if(d[i+1]!=m){e+=h*k.length;continue}for(var l=g?0:k.length-1,p=g?k.length:-1;l!=p;l+=h,e+=h)if(e>=b&&e<c&&o.test(f=k.charAt(l))){var q=ef[f];if(q.charAt(1)==">"==g)n.push(f);else{if(n.pop()!=q.charAt(0))return{pos:e,match:!1};if(!n.length)return{pos:e,match:!0}}}}}var b=bK.inverted?bK.from:bK.to,c=cp(b.line),d=b.ch-1,e=d>=0&&ef[c.text.charAt(d)]||ef[c.text.charAt(++d)];if(!e)return;var f=e.charAt(0),g=e.charAt(1)==">",h=g?1:-1,i=c.styles;for(var j=d+1,k=0,l=i.length;k<l;k+=2)if((j-=i[k].length)<=0){var m=i[k+1];break}var n=[c.text.charAt(d)],o=/[(){}[\]]/;for(var k=b.line,l=g?Math.min(k+100,bH.size):Math.max(-1,k-100);k!=l;k+=h){var c=cp(k),q=k==b.line,r=p(c,q&&g?d+1:0,q&&!g?d:c.text.length);if(r)break}r||(r={pos:null,match:!1});var m=r.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket",s=dH({line:b.line,ch:d},{line:b.line,ch:d+1},m),t=r.pos!=null&&dH({line:k,ch:r.pos},{line:k,ch:r.pos+1},m),u=eo(function(){s.clear(),t&&t.clear()});a?setTimeout(u,800):cc=u}function eh(a){var b,c;for(var d=a,e=a-40;d>e;--d){if(d==0)return 0;var g=cp(d-1);if(g.stateAfter)return d;var h=g.indentation(f.tabSize);if(c==null||b>h)c=d-1,b=h}return c}function ei(a){var b=eh(a),c=b&&cp(b-1).stateAfter;return c?c=z(bG,c):c=A(bG),bH.iter(b,a,function(d){d.process(bG,c,f.tabSize),d.stateAfter=b==a-1||b%5==0?z(bG,c):null}),c}function ej(){if(bI>=ca)return;var a=+(new Date)+f.workTime,b=z(bG,ei(bI)),c=bI;bH.iter(bI,ca,function(c){bI>=b_?(c.highlight(bG,b,f.tabSize),c.stateAfter=z(bG,b)):(c.process(bG,b,f.tabSize),c.stateAfter=bI%5==0?z(bG,b):null),++bI;if(+(new Date)>a)return ek(f.workDelay),!0}),ca>c&&bI>=b_&&eo(function(){bV.push({from:c,to:bI})})()}function ek(a){bI<ca&&bE.set(a,ej)}function el(){bT=bU=bW=null,bV=[],bX=!1,bZ=[]}function em(){ce&&cR();if(cf&&!f.lineWrapping){var a=N.offsetWidth,b=dQ(cd,cd.text.length).left;q||(N.style.left=b+"px",Z.style.minWidth=b+a+"px"),cf=!1}var c,d;if(bX){var e=dc();c=de(e.x,e.y,e.x,e.yBot)}if(bV.length||c&&c.scrollTop!=null)d=dg(bV,!0,c&&c.scrollTop);d||(bX&&dk(),bY&&dj()),c&&db(),bX&&ee(),bJ&&(bT===!0||bT!==!1&&bX)&&c_(bU),bX&&f.matchBrackets&&setTimeout(eo(function(){cc&&(cc(),cc=null),bp(bK.from,bK.to)&&eg(!1)}),20);var g=bX,h=bZ;bW&&f.onChange&&co&&f.onChange(co,bW),g&&f.onCursorActivity&&f.onCursorActivity(co);for(var i=0;i<h.length;++i)h[i](co);d&&f.onUpdate&&f.onUpdate(co)}function eo(a){return function(){en++||el();try{var b=a.apply(this,arguments)}finally{--en||em()}return b}}function ep(a){ci.startCompound();try{return a()}finally{ci.endCompound()}}var f={},i=a.defaults;for(var u in i)i.hasOwnProperty(u)&&(f[u]=(e&&e.hasOwnProperty(u)?e:i)[u]);var w=bs("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em");w.setAttribute("wrap","off"),w.setAttribute("autocorrect","off"),w.setAttribute("autocapitalize","off");var B=bs("div",[w],null,"overflow: hidden; position: relative; width: 3px; height: 0px;"),C=bs("div",null,"CodeMirror-scrollbar-inner"),F=bs("div",[C],"CodeMirror-scrollbar"),G=bs("div"),L=bs("div",null,null,"position: relative; z-index: -1"),M=bs("pre"," ","CodeMirror-cursor"),N=bs("pre"," ","CodeMirror-cursor","visibility: hidden"),W=bs("div",null,null,"position: absolute; width: 100%; height: 0px; overflow: hidden; visibility: hidden;"),Z=bs("div",[W,M,N,L,G],null,"position: relative; z-index: 0"),bg=bs("div",null,"CodeMirror-gutter-text"),bh=bs("div",[bg],"CodeMirror-gutter"),bi=bs("div",[bh,bs("div",[Z],"CodeMirror-lines")],null,"position: relative"),bl=bs("div",[bi],null,"position: relative"),bv=bs("div",[bl],"CodeMirror-scroll");bv.setAttribute("tabIndex","-1");var bC=bs("div",[B,F,bv],"CodeMirror"+(f.lineWrapping?" CodeMirror-wrap":""));d.appendChild?d.appendChild(bC):d(bC),dE(),dF(),b&&(w.style.width="0px"),t||(bv.draggable=!0),Z.style.outline="none",f.tabindex!=null&&(w.tabIndex=f.tabindex),f.autofocus&&da(),!f.gutter&&!f.lineNumbers&&(bh.style.display="none"),x&&(B.style.height="1px",B.style.position="absolute"),y?(F.style.zIndex=-2,F.style.visibility="hidden"):q&&(F.style.minWidth="18px");var bD=new bd,bE=new bd,bF,bG,bH=new Q([new P([new O("")])]),bI=0,bJ;dB();var bK={from:{line:0,ch:0},to:{line:0,ch:0},inverted:!1},bL,bM,bN,bO=0,bP,bQ=!1,bR=!1,bS=!1,bT,bU,bV,bW,bX,bY,bZ,b$=0,b_=0,ca=0,cb=0,cc,cd=cp(0),ce=!1,cf=!0,cg=!1,ch=null;eo(function(){cs(f.value||""),bT=!1})();var ci=new V;bc(bv,"mousedown",eo(cw)),bc(bv,"dblclick",eo(cx)),bc(Z,"selectstart",Y),o||bc(bv,"contextmenu",ed),bc(bv,"scroll",cv),bc(F,"scroll",cu),bc(F,"mousedown",function(){bJ&&setTimeout(da,0)});var cj=bc(window,"resize",function(){bC.parentNode?dg(!0):cj()},!0);bc(w,"keyup",eo(cH)),bc(w,"input",cY),bc(w,"keydown",eo(cF)),bc(w,"keypress",eo(cG)),bc(w,"focus",cI),bc(w,"blur",cJ),f.dragDrop&&(bc(bv,"dragstart",cz),bc(bv,"dragenter",ck),bc(bv,"dragover",ck),bc(bv,"drop",eo(cy))),bc(bv,"paste",function(){da(),cY()}),bc(w,"paste",function(){bS=!0,cY()}),bc(w,"cut",eo(function(){f.readOnly||cT("")})),x&&bc(bl,"mouseup",function(){document.activeElement==w&&w.blur(),da()});var cl;try{cl=document.activeElement==w}catch(cm){}cl||f.autofocus?setTimeout(cI,20):cJ();var co=bC.CodeMirror={getValue:ct,setValue:eo(cs),getSelection:cW,replaceSelection:eo(cT),focus:function(){window.focus(),da(),cI(),cY()},setOption:function(a,b){var c=f[a];f[a]=b,a=="mode"||a=="indentUnit"?dB():a=="readOnly"&&b=="nocursor"?(cJ(),w.blur()):a=="readOnly"&&!b?c_(!0):a=="theme"?dE():a=="lineWrapping"&&c!=b?eo(dD)():a=="tabSize"?dg(!0):a=="keyMap"?dF():a=="tabindex"&&(w.tabIndex=b);if(a=="lineNumbers"||a=="gutter"||a=="firstLineNumber"||a=="theme"||a=="lineNumberFormatter")dC(),dg(!0)},getOption:function(a){return f[a]},getMode:function(){return bG},undo:eo(cM),redo:eo(cN),indentLine:eo(function(a,b){typeof b!="string"&&(b==null?b=f.smartIndent?"smart":"prev":b=b?"add":"subtract"),cn(a)&&dA(a,b)}),indentSelection:eo(dz),historySize:function(){return{undo:ci.done.length,redo:ci.undone.length}},clearHistory:function(){ci=new V},setHistory:function(a){ci=new V,ci.done=a.done,ci.undone=a.undone},getHistory:function(){function a(a){for(var b=0,c=[],d;b<a.length;++b){c.push(d=[]);for(var e=0,f=a[b];e<f.length;++e){var g=[],h=f[e];d.push({start:h.start,added:h.added,old:g});for(var i=0;i<h.old.length;++i)g.push(I(h.old[i]))}}return c}return{done:a(ci.done),undone:a(ci.undone)}},matchBrackets:eo(function(){eg(!0)}),getTokenAt:eo(function(a){return a=ds(a),cp(a.line).getTokenAt(bG,ei(a.line),f.tabSize,a.ch)}),getStateAfter:function(a){return a=dr(a==null?bH.size-1:a),ei(a+1)},cursorCoords:function(a,b){return a==null&&(a=bK.inverted),this.charCoords(a?bK.from:bK.to,b)},charCoords:function(a,b){return a=ds(a),b=="local"?dR(a,!1):b=="div"?dR(a,!0):dT(a)},coordsChar:function(a){var b=bj(Z);return dS(a.x-b.left,a.y-b.top)},markText:eo(dH),setBookmark:dI,findMarksAt:dJ,setMarker:eo(dK),clearMarker:eo(dL),setLineClass:eo(dN),hideLine:eo(function(a){return dO(a,!0)}),showLine:eo(function(a){return dO(a,!1)}),onDeleteLine:function(a,b){if(typeof a=="number"){if(!cn(a))return null;a=cp(a)}return(a.handlers||(a.handlers=[])).push(b),a},lineInfo:dP,getViewport:function(){return{from:b_,to:ca}},addWidget:function(a,b,c,d,e){a=dR(ds(a));var f=a.yBot,g=a.x;b.style.position="absolute",bl.appendChild(b);if(d=="over")f=a.y;else if(d=="near"){var h=Math.max(bv.offsetHeight,bH.height*dX()),i=Math.max(bl.clientWidth,Z.clientWidth)-ea();a.yBot+b.offsetHeight>h&&a.y>b.offsetHeight&&(f=a.y-b.offsetHeight),g+b.offsetWidth>i&&(g=i-b.offsetWidth)}b.style.top=f+d_()+"px",b.style.left=b.style.right="",e=="right"?(g=bl.clientWidth-b.offsetWidth,b.style.right="0px"):(e=="left"?g=0:e=="middle"&&(g=(bl.clientWidth-b.offsetWidth)/2),b.style.left=g+ea()+"px"),c&&dd(g,f,g+b.offsetWidth,f+b.offsetHeight)},lineCount:function(){return bH.size},clipPos:ds,getCursor:function(a){return a==null&&(a=bK.inverted),br(a?bK.from:bK.to)},somethingSelected:function(){return!bp(bK.from,bK.to)},setCursor:eo(function(a,b,c){b==null&&typeof a.line=="number"?dq(a.line,a.ch,c):dq(a,b,c)}),setSelection
:eo(function(a,b,c){(c?dm:dn)(ds(a),ds(b||a))}),getLine:function(a){if(cn(a))return cp(a).text},getLineHandle:function(a){if(cn(a))return cp(a)},setLine:eo(function(a,b){cn(a)&&cS(b,{line:a,ch:0},{line:a,ch:cp(a).text.length})}),removeLine:eo(function(a){cn(a)&&cS("",{line:a,ch:0},ds({line:a+1,ch:0}))}),replaceRange:eo(cS),getRange:function(a,b,c){return cV(ds(a),ds(b),c)},triggerOnKeyDown:eo(cF),execCommand:function(a){return j[a](co)},moveH:eo(du),deleteH:eo(dv),moveV:eo(dw),toggleOverwrite:function(){bQ?(bQ=!1,M.className=M.className.replace(" CodeMirror-overwrite","")):(bQ=!0,M.className+=" CodeMirror-overwrite")},posFromIndex:function(a){var b=0,c;return bH.iter(0,bH.size,function(d){var e=d.text.length+1;if(e>a)return c=a,!0;a-=e,++b}),ds({line:b,ch:c})},indexFromPos:function(a){if(a.line<0||a.ch<0)return 0;var b=a.ch;return bH.iter(0,a.line,function(a){b+=a.text.length+1}),b},scrollTo:function(a,b){a!=null&&(bv.scrollLeft=a),b!=null&&(F.scrollTop=bv.scrollTop=b),dg([])},getScrollInfo:function(){return{x:bv.scrollLeft,y:F.scrollTop,height:F.scrollHeight,width:bv.scrollWidth}},setSize:function(a,b){function c(a){return a=String(a),/^\d+$/.test(a)?a+"px":a}a!=null&&(bC.style.width=c(a)),b!=null&&(bv.style.height=c(b)),co.refresh()},operation:function(a){return eo(a)()},compoundChange:function(a){return ep(a)},refresh:function(){dg(!0,null,bO),F.scrollHeight>bO&&(F.scrollTop=bO)},getInputField:function(){return w},getWrapperElement:function(){return bC},getScrollerElement:function(){return bv},getGutterElement:function(){return bh}},cB,cE=null,cZ="";dG.prototype.clear=eo(function(){var a,b;for(var c=0;c<this.lines.length;++c){var d=this.lines[c],e=D(d.markedSpans,this);e.from!=null&&(a=S(d)),e.to!=null&&(b=S(d)),d.markedSpans=E(d.markedSpans,e)}a!=null&&bV.push({from:a,to:b+1}),this.lines.length=0,this.explicitlyCleared=!0}),dG.prototype.find=function(){var a,b;for(var c=0;c<this.lines.length;++c){var d=this.lines[c],e=D(d.markedSpans,this);if(e.from!=null||e.to!=null){var f=S(d);e.from!=null&&(a={line:f,ch:e.from}),e.to!=null&&(b={line:f,ch:e.to})}}return this.type=="bookmark"?a:a&&{from:a,to:b}};var dU,dV,dW,dY,dZ=0,ec,ef={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"},en=0;for(var eq in g)g.propertyIsEnumerable(eq)&&!co.propertyIsEnumerable(eq)&&(co[eq]=g[eq]);for(var er=0;er<h.length;++er)h[er](co);return co}function l(a){return typeof a=="string"?k[a]:a}function m(a,b,c,d,e){function f(b){b=l(b);var c=b[a];if(c===!1)return e&&e(),!0;if(c!=null&&d(c))return!0;if(b.nofallthrough)return e&&e(),!0;var g=b.fallthrough;if(g==null)return!1;if(Object.prototype.toString.call(g)!="[object Array]")return f(g);for(var h=0,i=g.length;h<i;++h)if(f(g[h]))return!0;return!1}return b&&f(b)?!0:f(c)}function n(a){var b=bB[bb(a,"keyCode")];return b=="Ctrl"||b=="Alt"||b=="Shift"||b=="Mod"}function z(a,b){if(b===!0)return b;if(a.copyState)return a.copyState(b);var c={};for(var d in b){var e=b[d];e instanceof Array&&(e=e.concat([])),c[d]=e}return c}function A(a,b,c){return a.startState?a.startState(b,c):!0}function B(a,b){this.pos=this.start=0,this.string=a,this.tabSize=b||8}function C(a,b,c){this.from=a,this.to=b,this.marker=c}function D(a,b){if(a)for(var c=0;c<a.length;++c){var d=a[c];if(d.marker==b)return d}}function E(a,b){var c;for(var d=0;d<a.length;++d)a[d]!=b&&(c||(c=[])).push(a[d]);return c}function F(a,b,c){if(a)for(var d=0,e;d<a.length;++d){var f=a[d],g=f.marker,h=f.from==null||(g.inclusiveLeft?f.from<=b:f.from<b);if(h||g.type=="bookmark"&&f.from==b&&f.from!=c){var i=f.to==null||(g.inclusiveRight?f.to>=b:f.to>b);(e||(e=[])).push({from:f.from,to:i?null:f.to,marker:g})}}return e}function G(a,b){if(a)for(var c=0,d;c<a.length;++c){var e=a[c],f=e.marker,g=e.to==null||(f.inclusiveRight?e.to>=b:e.to>b);if(g||f.type=="bookmark"&&e.from==b){var h=e.from==null||(f.inclusiveLeft?e.from<=b:e.from<b);(d||(d=[])).push({from:h?null:e.from-b,to:e.to==null?null:e.to-b,marker:f})}}return d}function H(a,b,c,d,e){if(!a&&!b)return e;var f=F(a,c),g=G(b,d),h=e.length==1,i=bn(e).length+(h?c:0);if(f)for(var j=0;j<f.length;++j){var k=f[j];if(k.to==null){var l=D(g,k.marker);l?h&&(k.to=l.to==null?null:l.to+i):k.to=c}}if(g)for(var j=0;j<g.length;++j){var k=g[j];k.to!=null&&(k.to+=i);if(k.from==null){var l=D(f,k.marker);l||(k.from=i,h&&(f||(f=[])).push(k))}else k.from+=i,h&&(f||(f=[])).push(k)}var m=[K(e[0],f)];if(!h){var n=e.length-2,o;if(n>0&&f)for(var j=0;j<f.length;++j)f[j].to==null&&(o||(o=[])).push({from:null,to:null,marker:f[j].marker});for(var j=0;j<n;++j)m.push(K(e[j+1],o));m.push(K(bn(e),g))}return m}function I(a){return typeof a=="string"?a:a.text}function J(a){if(typeof a=="string")return null;var b=a.markedSpans,c=null;for(var d=0;d<b.length;++d)b[d].marker.explicitlyCleared?c||(c=b.slice(0,d)):c&&c.push(b[d]);return c?c.length?c:null:b}function K(a,b){return b?{text:a,markedSpans:b}:a}function L(a){var b=a.markedSpans;if(!b)return;for(var c=0;c<b.length;++c){var d=b[c].marker.lines,e=bx(d,a);d.splice(e,1)}a.markedSpans=null}function M(a,b){if(!b)return;for(var c=0;c<b.length;++c)var d=b[c].marker.lines.push(a);a.markedSpans=b}function O(a,b){this.text=a,this.height=1,M(this,b)}function P(a){this.lines=a,this.parent=null;for(var b=0,c=a.length,d=0;b<c;++b)a[b].parent=this,d+=a[b].height;this.height=d}function Q(a){this.children=a;var b=0,c=0;for(var d=0,e=a.length;d<e;++d){var f=a[d];b+=f.chunkSize(),c+=f.height,f.parent=this}this.size=b,this.height=c,this.parent=null}function R(a,b){while(!a.lines)for(var c=0;;++c){var d=a.children[c],e=d.chunkSize();if(b<e){a=d;break}b-=e}return a.lines[b]}function S(a){if(a.parent==null)return null;var b=a.parent,c=bx(b.lines,a);for(var d=b.parent;d;b=d,d=d.parent)for(var e=0,f=d.children.length;;++e){if(d.children[e]==b)break;c+=d.children[e].chunkSize()}return c}function T(a,b){var c=0;a:do{for(var d=0,e=a.children.length;d<e;++d){var f=a.children[d],g=f.height;if(b<g){a=f;continue a}b-=g,c+=f.chunkSize()}return c}while(!a.lines);for(var d=0,e=a.lines.length;d<e;++d){var h=a.lines[d],i=h.height;if(b<i)break;b-=i}return c+d}function U(a,b){var c=0;a:do{for(var d=0,e=a.children.length;d<e;++d){var f=a.children[d],g=f.chunkSize();if(b<g){a=f;continue a}b-=g,c+=f.height}return c}while(!a.lines);for(var d=0;d<b;++d)c+=a.lines[d].height;return c}function V(){this.time=0,this.done=[],this.undone=[],this.compound=0,this.closed=!1}function W(){$(this)}function X(a){return a.stop||(a.stop=W),a}function Y(a){a.preventDefault?a.preventDefault():a.returnValue=!1}function Z(a){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0}function $(a){Y(a),Z(a)}function _(a){return a.target||a.srcElement}function ba(a){var b=a.which;return b==null&&(a.button&1?b=1:a.button&2?b=3:a.button&4&&(b=2)),c&&a.ctrlKey&&b==1&&(b=3),b}function bb(a,b){var c=a.override&&a.override.hasOwnProperty(b);return c?a.override[b]:a[b]}function bc(a,b,c,d){if(typeof a.addEventListener=="function"){a.addEventListener(b,c,!1);if(d)return function(){a.removeEventListener(b,c,!1)}}else{var e=function(a){c(a||window.event)};a.attachEvent("on"+b,e);if(d)return function(){a.detachEvent("on"+b,e)}}}function bd(){this.id=null}function bi(a,b,c){b==null&&(b=a.search(/[^\s\u00a0]/),b==-1&&(b=a.length));for(var d=0,e=0;d<b;++d)a.charAt(d)=="\t"?e+=c-e%c:++e;return e}function bj(a,b){try{var c=a.getBoundingClientRect();c={top:c.top,left:c.left}}catch(d){c={top:0,left:0}}if(!b)if(window.pageYOffset==null){var e=document.documentElement||document.body.parentNode;e.scrollTop==null&&(e=document.body),c.top+=e.scrollTop,c.left+=e.scrollLeft}else c.top+=window.pageYOffset,c.left+=window.pageXOffset;return c}function bk(a){return a.textContent||a.innerText||a.nodeValue||""}function bm(a){while(bl.length<=a)bl.push(bn(bl)+" ");return bl[a]}function bn(a){return a[a.length-1]}function bo(a){b?(a.selectionStart=0,a.selectionEnd=a.value.length):a.select()}function bp(a,b){return a.line==b.line&&a.ch==b.ch}function bq(a,b){return a.line<b.line||a.line==b.line&&a.ch<b.ch}function br(a){return{line:a.line,ch:a.ch}}function bs(a,b,c,d){var e=document.createElement(a);c&&(e.className=c),d&&(e.style.cssText=d);if(typeof b=="string")bv(e,b);else if(b)for(var f=0;f<b.length;++f)e.appendChild(b[f]);return e}function bt(a){return a.innerHTML="",a}function bu(a,b){bt(a).appendChild(b)}function bv(a,b){r?(a.innerHTML="",a.appendChild(document.createTextNode(b))):a.textContent=b}function bw(a,b){if(!b)return 0;if(!a)return b.length;for(var c=a.length,d=b.length;c>=0&&d>=0;--c,--d)if(a.charAt(c)!=b.charAt(d))break;return d+1}function bx(a,b){if(a.indexOf)return a.indexOf(b);for(var c=0,d=a.length;c<d;++c)if(a[c]==b)return c;return-1}function by(a){return/\w/.test(a)||a.toUpperCase()!=a.toLowerCase()||/[\u4E00-\u9FA5]/.test(a)}"use strict",a.defaults={value:"",mode:null,theme:"default",indentUnit:2,indentWithTabs:!1,smartIndent:!0,tabSize:4,keyMap:"default",extraKeys:null,electricChars:!0,autoClearEmptyLines:!1,onKeyEvent:null,onDragEvent:null,lineWrapping:!1,lineNumbers:!1,gutter:!1,fixedGutter:!1,firstLineNumber:1,readOnly:!1,dragDrop:!0,onChange:null,onCursorActivity:null,onViewportChange:null,onGutterClick:null,onUpdate:null,onFocus:null,onBlur:null,onScroll:null,matchBrackets:!1,cursorBlinkRate:530,workTime:100,workDelay:200,pollInterval:100,undoDepth:40,tabindex:null,autofocus:null,lineNumberFormatter:function(a){return a}};var b=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),c=b||/Mac/.test(navigator.platform),d=/Win/.test(navigator.platform),e=a.modes={},f=a.mimeModes={};a.defineMode=function(b,c){!a.defaults.mode&&b!="null"&&(a.defaults.mode=b);if(arguments.length>2){c.dependencies=[];for(var d=2;d<arguments.length;++d)c.dependencies.push(arguments[d])}e[b]=c},a.defineMIME=function(a,b){f[a]=b},a.resolveMode=function(b){if(typeof b=="string"&&f.hasOwnProperty(b))b=f[b];else if(typeof b=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(b))return a.resolveMode("application/xml");return typeof b=="string"?{name:b}:b||{name:"null"}},a.getMode=function(b,c){var c=a.resolveMode(c),d=e[c.name];if(!d)return a.getMode(b,"text/plain");var f=d(b,c);if(i.hasOwnProperty(c.name)){var g=i[c.name];for(var h in g)g.hasOwnProperty(h)&&(f[h]=g[h])}return f.name=c.name,f},a.listModes=function(){var a=[];for(var b in e)e.propertyIsEnumerable(b)&&a.push(b);return a},a.listMIMEs=function(){var a=[];for(var b in f)f.propertyIsEnumerable(b)&&a.push({mime:b,mode:f[b]});return a};var g=a.extensions={};a.defineExtension=function(a,b){g[a]=b};var h=[];a.defineInitHook=function(a){h.push(a)};var i=a.modeExtensions={};a.extendMode=function(a,b){var c=i.hasOwnProperty(a)?i[a]:i[a]={};for(var d in b)b.hasOwnProperty(d)&&(c[d]=b[d])};var j=a.commands={selectAll:function(a){a.setSelection({line:0,ch:0},{line:a.lineCount()-1})},killLine:function(a){var b=a.getCursor(!0),c=a.getCursor(!1),d=!bp(b,c);!d&&a.getLine(b.line).length==b.ch?a.replaceRange("",b,{line:b.line+1,ch:0}):a.replaceRange("",b,d?c:{line:b.line})},deleteLine:function(a){var b=a.getCursor().line;a.replaceRange("",{line:b,ch:0},{line:b})},undo:function(a){a.undo()},redo:function(a){a.redo()},goDocStart:function(a){a.setCursor(0,0,!0)},goDocEnd:function(a){a.setSelection({line:a.lineCount()-1},null,!0)},goLineStart:function(a){a.setCursor(a.getCursor().line,0,!0)},goLineStartSmart:function(a){var b=a.getCursor(),c=a.getLine(b.line),d=Math.max(0,c.search(/\S/));a.setCursor(b.line,b.ch<=d&&b.ch?0:d,!0)},goLineEnd:function(a){a.setSelection({line:a.getCursor().line},null,!0)},goLineUp:function(a){a.moveV(-1,"line")},goLineDown:function(a){a.moveV(1,"line")},goPageUp:function(a){a.moveV(-1,"page")},goPageDown:function(a){a.moveV(1,"page")},goCharLeft:function(a){a.moveH(-1,"char")},goCharRight:function(a){a.moveH(1,"char")},goColumnLeft:function(a){a.moveH(-1,"column")},goColumnRight:function(a){a.moveH(1,"column")},goWordLeft:function(a){a.moveH(-1,"word")},goWordRight:function(a){a.moveH(1,"word")},delCharLeft:function(a){a.deleteH(-1,"char")},delCharRight:function(a){a.deleteH(1,"char")},delWordLeft:function(a){a.deleteH(-1,"word")},delWordRight:function(a){a.deleteH(1,"word")},indentAuto:function(a){a.indentSelection("smart")},indentMore:function(a){a.indentSelection("add")},indentLess:function(a){a.indentSelection("subtract")},insertTab:function(a){a.replaceSelection("\t","end")},defaultTab:function(a){a.somethingSelected()?a.indentSelection("add"):a.replaceSelection("\t","end")},transposeChars:function(a){var b=a.getCursor(),c=a.getLine(b.line);b.ch>0&&b.ch<c.length-1&&a.replaceRange(c.charAt(b.ch)+c.charAt(b.ch-1),{line:b.line,ch:b.ch-1},{line:b.line,ch:b.ch+1})},newlineAndIndent:function(a){a.replaceSelection("\n","end"),a.indentLine(a.getCursor().line)},toggleOverwrite:function(a){a.toggleOverwrite()}},k=a.keyMap={};k.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharRight",Backspace:"delCharLeft",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite"},k.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Alt-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goWordLeft","Ctrl-Right":"goWordRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delWordLeft","Ctrl-Delete":"delWordRight","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore",fallthrough:"basic"},k.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goWordLeft","Alt-Right":"goWordRight","Cmd-Left":"goLineStart","Cmd-Right":"goLineEnd","Alt-Backspace":"delWordLeft","Ctrl-Alt-Backspace":"delWordRight","Alt-Delete":"delWordRight","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore",fallthrough:["basic","emacsy"]},k["default"]=c?k.macDefault:k.pcDefault,k.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageUp","Shift-Ctrl-V":"goPageDown","Ctrl-D":"delCharRight","Ctrl-H":"delCharLeft","Alt-D":"delWordRight","Alt-Backspace":"delWordLeft","Ctrl-K":"killLine","Ctrl-T":"transposeChars"},a.isModifierKey=n,a.fromTextArea=function(b,c){function f(){b.value=i.getValue()}c||(c={}),c.value=b.value,!c.tabindex&&b.tabindex&&(c.tabindex=b.tabindex);if(c.autofocus==null){var d=document.body;try{d=document.activeElement}catch(e){}c.autofocus=d==b||b.getAttribute("autofocus")!=null&&d==document.body}if(b.form){var g=bc(b.form,"submit",f,!0);if(typeof b.form.submit=="function"){var h=b.form.submit;b.form.submit=function j(){f(),b.form.submit=h,b.form.submit(),b.form.submit=j}}}b.style.display="none";var i=a(function(a){b.parentNode.insertBefore(a,b.nextSibling)},c);return i.save=f,i.getTextArea=function(){return b},i.toTextArea=function(){f(),b.parentNode.removeChild(i.getWrapperElement()),b.style.display="",b.form&&(g(),typeof b.form.submit=="function"&&(b.form.submit=h))},i};var o=/gecko\/\d{7}/i.test(navigator.userAgent),p=/MSIE \d/.test(navigator.userAgent),q=/MSIE [1-7]\b/.test(navigator.userAgent),r=/MSIE [1-8]\b/.test(navigator.userAgent),s=p&&document.documentMode==5,t=/WebKit\//.test(navigator.userAgent),u=/Chrome\//.test(navigator.userAgent),v=/Opera\//.test(navigator.userAgent),w=/Apple Computer/.test(navigator.vendor),x=/KHTML\//.test(navigator.userAgent),y=/Mac OS X 10\D([7-9]|\d\d)\D/.test(navigator.userAgent);a.copyState=z,a.startState=A,a.innerMode=function(a,b){while(a.innerMode){var c=a.innerMode(b);b=c.state,a=c.mode}return c||{mode:a,state:b}},B.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==0},peek:function(){return this.string.charAt(this.pos)||undefined},next:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},eat:function(a){var b=this.string.charAt(this.pos);if(typeof a=="string")var c=b==a;else var c=b&&(a.test?a.test(b):a(b));if(c)return++this.pos,b},eatWhile:function(a){var b=this.pos;while(this.eat(a));return this.pos>b},eatSpace:function(){var a=this.pos;while(/[\s\u00a0]/.test(this.string.charAt(this.pos)))++this.pos;return this.pos>a},skipToEnd:function(){this.pos=this.string.length},skipTo:function(a){var b=this.string.indexOf(a,this.pos);if(b>-1)return this.pos=b,!0},backUp:function(a){this.pos-=a},column:function(){return bi(this.string,this.start,this.tabSize)},indentation:function(){return bi(this.string,null,this.tabSize)},match:function(a,b,c){if(typeof a!="string"){var e=this.string.slice(this.pos).match(a);return e&&e.index>0?null:(e&&b!==!1&&(this.pos+=e[0].length),e)}var d=function(a){return c?a.toLowerCase():a};if(d(this.string).indexOf(d(a),this.pos)==this.pos)return b!==!1&&(this.pos+=a.length),!0},current:function(){return this.string.slice(this.start,this.pos)}},a.StringStream=B;var N=" ";o||p&&!q?N="​":v&&(N=""),O.prototype={update:function(a,b){this.text=a,this.stateAfter=this.styles=null,L(this),M(this,b)},highlight:function(a,b,c){var d=new B(this.text,c),e=this.styles||(this.styles=[]),f=e.length=0;this.text==""&&a.blankLine&&a.blankLine(b);while(!d.eol()){var g=a.token(d,b),h=d.current();d.start=d.pos,f&&e[f-1]==g?e[f-2]+=h:h&&(e[f++]=h,e[f++]=g);if(d.pos>5e3){e[f++]=this.text.slice(d.pos),e[f++]=null;break}}},process:function(a,b,c){var d=new B(this.text,c);this.text==""&&a.blankLine&&a.blankLine(b);while(!d.eol()&&d.pos<=5e3)a.token(d,b),d.start=d.pos},getTokenAt:function(a,b,c,d){var e=this.text,f=new B(e,c);while(f.pos<d&&!f.eol()){f.start=f.pos;var g=a.token(f,b)}return{start:f.start,end:f.pos,string:f.current(),className:g||null,state:b}},indentation:function(a){return bi(this.text,null,a)},getContent:function(a,b,c){function h(b,c,g){if(!c)return;d&&p&&c.charAt(0)==" "&&(c=" "+c.slice(1)),d=!1;if(!f.test(c)){e+=c.length;var h=document.createTextNode(c)}else{var h=document.createDocumentFragment(),i=0;for(;;){f.lastIndex=i;var j=f.exec(c),k=j?j.index-i:c.length-i;k&&(h.appendChild(document.createTextNode(c.slice(i,i+k))),e+=k);if(!j)break;i+=k+1;if(j[0]=="\t"){var l=a-e%a;h.appendChild(bs("span",bm(l),"cm-tab")),e+=l}else{var m=bs("span","•","cm-invalidchar");m.title="\\u"+j[0].charCodeAt(0).toString(16),h.appendChild(m),e+=1}}}g?b.appendChild(bs("span",[h],g)):b.appendChild(h)}function r(a){return a?"cm-"+a.replace(/ +/g," cm-"):null}var d=!0,e=0,f=/[\t\u0000-\u0019\u200b\u2028\u2029\uFEFF]/g,g=bs("pre"),i=h;if(b!=null){var j=0,k=g.anchor=bs("span");i=function(a,d,e){var f=d.length;if(b>=j&&b<j+f){var g=b-j;if(g){h(a,d.slice(0,g),e);if(c){var l=d.slice(g-1,g+1);bh.test(l)?a.appendChild(bs("wbr")):!q&&/\w\w/.test(l)&&a.appendChild(document.createTextNode("‍"))}}a.appendChild(k),h(k,v?d.slice(g,g+1):d.slice(g),e),v&&h(a,d.slice(g+1),e),b--,j+=f}else j+=f,h(a,d,e),j==b&&j==o?(bv(k,N),a.appendChild(k)):j>b+10&&/\s/.test(d)&&(i=function(){})}}var l=this.styles,m=this.text,n=this.markedSpans,o=m.length;if(!m&&b==null)i(g," ");else if(!n||!n.length)for(var s=0,t=0;t<o;s+=2){var u=l[s],w=l[s+1],x=u.length;t+x>o&&(u=u.slice(0,o-t)),t+=x,i(g,u,r(w))}else{n.sort(function(a,b){return a.from-b.from});var y=0,s=0,z="",w,A=0,B=n[0].from||0,C=[],D=0,E=function(){var a;while(D<n.length&&((a=n[D]).from==y||a.from==null))a.marker.type=="range"&&C.push(a),++D;B=D<n.length?n[D].from:Infinity;for(var b=0;b<C.length;++b){var c=C[b].to;c==null&&(c=Infinity),c==y?C.splice(b--,1):B=Math.min(c,B)}},F=0;while(y<o){B==y&&E();var G=Math.min(o,B);for(;;){if(z){var H=y+z.length,I=w;for(var J=0;J<C.length;++J){var K=C[J];I=(I?I+" ":"")+K.marker.style,K.marker.endStyle&&K.to===Math.min(H,G)&&(I+=" "+K.marker.endStyle),K.marker.startStyle&&K.from===y&&(I+=" "+K.marker.startStyle)}i(g,H>G?z.slice(0,G-y):z,I);if(H>=G){z=z.slice(G-y),y=G;break}y=H}z=l[s++],w=r(l[s++])}}}return g},cleanUp:function(){this.parent=null,L(this)}},P.prototype={chunkSize:function(){return this.lines.length},remove:function(a,b,c){for(var d=a,e=a+b;d<e;++d){var f=this.lines[d];this.height-=f.height,f.cleanUp();if(f.handlers)for(var g=0;g<f.handlers.length;++g)c.push(f.handlers[g])}this.lines.splice(a,b)},collapse:function(a){a.splice.apply(a,[a.length,0].concat(this.lines))},insertHeight:function(a,b,c){this.height+=c,this.lines=this.lines.slice(0,a).concat(b).concat(this.lines.slice(a));for(var d=0,e=b.length;d<e;++d)b[d].parent=this},iterN:function(a,b,c){for(var d=a+b;a<d;++a)if(c(this.lines[a]))return!0}},Q.prototype={chunkSize:function(){return this.size},remove:function(a,b,c){this.size-=b;for(var d=0;d<this.children.length;++d){var e=this.children[d],f=e.chunkSize();if(a<f){var g=Math.min(b,f-a),h=e.height;e.remove(a,g,c),this.height-=h-e.height,f==g&&(this.children.splice(d--,1),e.parent=null);if((b-=g)==0)break;a=0}else a-=f}if(this.size-b<25){var i=[];this.collapse(i),this.children=[new P(i)],this.children[0].parent=this}},collapse:function(a){for(var b=0,c=this.children.length;b<c;++b)this.children[b].collapse(a)},insert:function(a,b){var c=0;for(var d=0,e=b.length;d<e;++d)c+=b[d].height;this.insertHeight(a,b,c)},insertHeight:function(a,b,c){this.size+=b.length,this.height+=c;for(var d=0,e=this.children.length;d<e;++d){var f=this.children[d],g=f.chunkSize();if(a<=g){f.insertHeight(a,b,c);if(f.lines&&f.lines.length>50){while(f.lines.length>50){var h=f.lines.splice(f.lines.length-25,25),i=new P(h);f.height-=i.height,this.children.splice(d+1,0,i),i.parent=this}this.maybeSpill()}break}a-=g}},maybeSpill:function(){if(this.children.length<=10)return;var a=this;do{var b=a.children.splice(a.children.length-5,5),c=new Q(b);if(!a.parent){var d=new Q(a.children);d.parent=a,a.children=[d,c],a=d}else{a.size-=c.size,a.height-=c.height;var e=bx(a.parent.children,a);a.parent.children.splice(e+1,0,c)}c.parent=a.parent}while(a.children.length>10);a.parent.maybeSpill()},iter:function(a,b,c){this.iterN(a,b-a,c)},iterN:function(a,b,c){for(var d=0,e=this.children.length;d<e;++d){var f=this.children[d],g=f.chunkSize();if(a<g){var h=Math.min(b,g-a);if(f.iterN(a,h,c))return!0;if((b-=h)==0)break;a=0}else a-=g}}},V.prototype={addChange:function(a,b,c){this.undone.length=0;var d=+(new Date),e=bn(this.done),f=e&&bn(e),g=d-this.time;if(e&&!this.closed&&this.compound)e.push({start:a,added:b,old:c});else if(g>400||!f||this.closed||f.start>a+c.length||f.start+f.added<a)this.done.push([{start:a,added:b,old:c}]),this.closed=!1;else{var h=Math.max(0,f.start-a),i=Math.max(0,a+c.length-(f.start+f.added));for(var j=h;j>0;--j)f.old.unshift(c[j-1]);for(var j=i;j>0;--j)f.old.push(c[c.length-j]);h&&(f.start=a),f.added+=b-(c.length-h-i)}this.time=d},startCompound:function(){this.compound++||(this.closed=!0)},endCompound:function(){--this.compound||(this.closed=!0)}},a.e_stop=$,a.e_preventDefault=Y,a.e_stopPropagation=Z,a.connect=bc,bd.prototype={set:function(a,b){clearTimeout(this.id),this.id=setTimeout(b,a)}};var be=a.Pass={toString:function(){return"CodeMirror.Pass"}},bf=function(){if(r)return!1;var a=bs("div");return"draggable"in a||"dragDrop"in a}(),bg=function(){var a=bs("textarea");return a.value="foo\nbar",a.value.indexOf("\r")>-1?"\r\n":"\n"}(),bh=/^$/;o?bh=/$'/:w?bh=/\-[^ \-?]|\?[^ !'\"\),.\-\/:;\?\]\}]/:u&&(bh=/\-[^ \-\.?]|\?[^ \-\.?\]\}:;!'\"\),\/]|[\.!\"#&%\)*+,:;=>\]|\}~][\(\{\[<]|\$'/);var bl=[""],bz="\n\nb".split(/\n/).length!=3?function(a){var b=0,c=[],d=a.length;while(b<=d){var e=a.indexOf("\n",b);e==-1&&(e=a.length);var f=a.slice(b,a.charAt(e-1)=="\r"?e-1:e),g=f.indexOf("\r");g!=-1?(c.push(f.slice(0,g)),b+=g+1):(c.push(f),b=e+1)}return c}:function(a){return a.split(/\r\n?|\n/)};a.splitLines=bz;var bA=window.getSelection?function(a){try{return a.selectionStart!=a.selectionEnd}catch(b){return!1}}:function(a){try{var b=a.ownerDocument.selection.createRange()}catch(c){}return!b||b.parentElement()!=a?!1:b.compareEndPoints("StartToEnd",b)!=0};a.defineMode("null",function(){return{token:function(a){a.skipToEnd()}}}),a.defineMIME("text/plain","null");var bB={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",91:"Mod",92:"Mod",93:"Mod",109:"-",107:"=",127:"Delete",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63276:"PageUp",63277:"PageDown",63275:"End",63273:"Home",63234:"Left",63232:"Up",63235:"Right",63233:"Down",63302:"Insert",63272:"Delete"};return a.keyNames=bB,function(){for(var a=0;a<10;a++)bB[a+48]=String(a);for(var a=65;a<=90;a++)bB[a]=String.fromCharCode(a);for(var a=1;a<=12;a++)bB[a+111]=bB[a+63235]="F"+a}(),a.version="2.35",a}();